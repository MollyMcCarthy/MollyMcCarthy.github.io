<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.18.1" />
  <meta name="author" content="Molly McCarthy">
  <meta name="description" content="Public Health Undergraduate">

  
  
  
  
    
    
    <link rel="stylesheet" href="/css/highlight.min.css">
    
  
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/academicons.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700|Merriweather|Roboto+Mono">
  <link rel="stylesheet" href="/css/hugo-academic.css">
  

  <link rel="alternate" href="https://www.sullivanstatistics.com/index.xml" type="application/rss+xml" title="Molly McCarthy">
  <link rel="feed" href="https://www.sullivanstatistics.com/index.xml" type="application/rss+xml" title="Molly McCarthy">

  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/apple-touch-icon.png">

  <link rel="canonical" href="https://www.sullivanstatistics.com/post/In-Class-Project-2/">

  

  <title>In Class Assignment Feb 28 | Molly McCarthy</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Molly McCarthy</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#teaching">
            
            <span>Teaching</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
          </a>
        </li>

        
        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  

  <div class="article-container">
    <h1 itemprop="name">In Class Assignment Feb 28</h1>
    

<div class="article-metadata">

  <span class="article-date">
    <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" itemprop="datePublished">
      Mon, Jan 1, 0001
    </time>
  </span>

  

  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.sullivanstatistics.com%2fpost%2fIn-Class-Project-2%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=In%20Class%20Assignment%20Feb%2028&amp;url=https%3a%2f%2fwww.sullivanstatistics.com%2fpost%2fIn-Class-Project-2%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.sullivanstatistics.com%2fpost%2fIn-Class-Project-2%2f&amp;title=In%20Class%20Assignment%20Feb%2028"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=https%3a%2f%2fwww.sullivanstatistics.com%2fpost%2fIn-Class-Project-2%2f&amp;title=In%20Class%20Assignment%20Feb%2028"
         target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=In%20Class%20Assignment%20Feb%2028&amp;body=https%3a%2f%2fwww.sullivanstatistics.com%2fpost%2fIn-Class-Project-2%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    <div class="article-style" itemprop="articleBody">
      <ol style="list-style-type: decimal">
<li></li>
</ol>
<pre class="r"><code>ckmnodes = read.csv(file = &quot;ckm_nodes.csv&quot;)
dim(ckmnodes)</code></pre>
<pre><code>## [1] 246  13</code></pre>
<pre class="r"><code>colnames(ckmnodes)</code></pre>
<pre><code>##  [1] &quot;city&quot;                         &quot;adoption_date&quot;               
##  [3] &quot;medical_school&quot;               &quot;attend_meetings&quot;             
##  [5] &quot;medical_journals&quot;             &quot;free_time_with&quot;              
##  [7] &quot;discuss_medicine_socially&quot;    &quot;club_with_drs&quot;               
##  [9] &quot;drs_among_three_best_friends&quot; &quot;practicing_here&quot;             
## [11] &quot;office_visits_per_week&quot;       &quot;proximity_to_other_drs&quot;      
## [13] &quot;specialty&quot;</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>16 doctors never prescribed tetracycline. 121 values are NA. See table below for counts at the end of each month.</li>
</ol>
<pre class="r"><code>table(ckmnodes$adoption_date)</code></pre>
<pre><code>## 
##   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17 Inf 
##  11   9   9  11  11  11  13   7   4   1   5   3   3   4   4   2   1  16</code></pre>
<pre class="r"><code>names(which.max(table(ckmnodes$adoption_date)))</code></pre>
<pre><code>## [1] &quot;Inf&quot;</code></pre>
<pre class="r"><code>library(&#39;plyr&#39;)
count(ckmnodes, &#39;adoption_date&#39;)</code></pre>
<pre><code>##    adoption_date freq
## 1              1   11
## 2              2    9
## 3              3    9
## 4              4   11
## 5              5   11
## 6              6   11
## 7              7   13
## 8              8    7
## 9              9    4
## 10            10    1
## 11            11    5
## 12            12    3
## 13            13    3
## 14            14    4
## 15            15    4
## 16            16    2
## 17            17    1
## 18           Inf   16
## 19            NA  121</code></pre>
<ol start="3" style="list-style-type: decimal">
<li></li>
</ol>
<pre class="r"><code>newvec = which(!is.na(ckmnodes$adoption_date))
length(newvec)</code></pre>
<pre><code>## [1] 125</code></pre>
<pre class="r"><code>cleaned_nodes = ckmnodes[newvec,]
head(cleaned_nodes)</code></pre>
<pre><code>##     city adoption_date medical_school attend_meetings medical_journals
## 1 Peoria             1     1920--1929       specialty                9
## 2 Peoria            12          1945+            none                5
## 3 Peoria             8     1935--1939         general                7
## 4 Peoria             9     1940--1944         general                6
## 5 Peoria             9     1935--1939         general                4
## 6 Peoria            10     1930--1934            none                7
##   free_time_with discuss_medicine_socially club_with_drs
## 1    non-doctors                        no            no
## 2        doctors                       yes            no
## 3        doctors                        no            no
## 4    non-doctors                        no            no
## 5    non-doctors                       yes            no
## 6          split                       yes            no
##   drs_among_three_best_friends practicing_here office_visits_per_week
## 1                            0       20+ years               101--150
## 2                            3         1- year                76--100
## 3                            2    10--20 years                76--100
## 4                            0     5--10 years                 51--75
## 5                            1    10--20 years                 51--75
## 6                            0    10--20 years               101--150
##       proximity_to_other_drs    specialty
## 1     in_building_and_office pediatrician
## 2     in_building_and_office           GP
## 3 in_building_but_not_office    internist
## 4     in_building_and_office           GP
## 5 in_building_but_not_office           GP
## 6     in_building_and_office    internist</code></pre>
<ol start="4" style="list-style-type: decimal">
<li></li>
</ol>
<pre class="r"><code>adopters = function(month, not.yet = FALSE){
  if (not.yet == FALSE) {return (as.vector(cleaned_nodes$adoption_date ==  month))}
  else {return (as.vector(cleaned_nodes$adoption_date &gt; month | cleaned_nodes$adoption_date == &quot;Inf&quot;))}
}
sum(adopters(2))</code></pre>
<pre><code>## [1] 9</code></pre>
<pre class="r"><code>sum(adopters(month = 14, not.yet = TRUE))</code></pre>
<pre><code>## [1] 23</code></pre>
<pre class="r"><code>## for a particular month, this function gives the number of doctos who began prescribing that month, unless not.yet is true, in which case it will return a vector of the doctors who began prescribing after that month or never </code></pre>
<ol start="5" style="list-style-type: decimal">
<li></li>
</ol>
<pre class="r"><code>ckmnetwork = read.table(file = &quot;/Users/mollymccarthy/Downloads/ckm_network (2).dat&quot;)
head(ckmnetwork)</code></pre>
<pre><code>##   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20
## 1  0  0  0  0  0  0  0  1  0   0   0   0   0   0   0   0   0   0   0   0
## 2  0  0  0  0  0  0  0  0  0   0   1   0   0   0   0   0   0   0   0   0
## 3  0  0  0  0  0  0  0  0  1   0   0   0   0   1   0   1   0   0   0   1
## 4  0  0  0  0  0  0  1  0  0   0   0   0   0   0   0   0   0   0   0   0
## 5  0  0  0  0  0  0  0  0  0   1   0   1   0   0   1   0   0   0   0   0
## 6  0  0  0  0  0  0  0  0  0   0   0   0   0   0   0   0   0   0   0   0
##   V21 V22 V23 V24 V25 V26 V27 V28 V29 V30 V31 V32 V33 V34 V35 V36 V37 V38
## 1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 3   0   0   0   0   0   0   0   0   1   0   1   0   1   0   1   0   1   0
## 4   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   1
## 5   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 6   0   0   0   0   0   0   0   0   1   0   1   0   0   0   0   0   0   0
##   V39 V40 V41 V42 V43 V44 V45 V46 V47 V48 V49 V50 V51 V52 V53 V54 V55 V56
## 1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0
## 3   0   0   0   0   0   1   0   1   0   0   0   0   1   0   0   0   0   0
## 4   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 5   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   1
## 6   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   1
##   V57 V58 V59 V60 V61 V62 V63 V64 V65 V66 V67 V68 V69 V70 V71 V72 V73 V74
## 1   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 3   0   0   0   1   0   1   0   0   0   0   0   0   1   0   0   0   0   0
## 4   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0
## 5   0   0   0   1   1   0   0   0   1   0   1   0   0   0   0   0   0   0
## 6   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##   V75 V76 V77 V78 V79 V80 V81 V82 V83 V84 V85 V86 V87 V88 V89 V90 V91 V92
## 1   0   0   0   1   0   0   0   0   0   0   0   0   1   0   0   1   0   0
## 2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0
## 3   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 4   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 5   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 6   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
##   V93 V94 V95 V96 V97 V98 V99 V100 V101 V102 V103 V104 V105 V106 V107 V108
## 1   0   0   0   0   0   0   0    0    0    0    0    0    0    0    0    0
## 2   0   0   0   0   0   1   0    1    0    0    0    0    0    0    0    0
## 3   0   0   0   0   0   0   0    0    0    0    0    0    0    0    0    0
## 4   0   1   0   0   0   0   0    0    0    0    1    0    0    1    1    0
## 5   0   0   0   0   0   0   1    0    0    0    0    0    0    0    0    0
## 6   0   1   0   0   0   0   1    0    0    0    0    0    0    0    0    0
##   V109 V110 V111 V112 V113 V114 V115 V116 V117 V118 V119 V120 V121 V122
## 1    0    1    0    1    0    0    0    0    0    0    0    0    0    0
## 2    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 3    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 4    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 5    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 6    0    0    0    0    0    0    0    0    0    0    0    0    0    0
##   V123 V124 V125 V126 V127 V128 V129 V130 V131 V132 V133 V134 V135 V136
## 1    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 2    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 3    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 4    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 5    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 6    0    0    0    0    0    0    0    0    0    0    0    0    0    0
##   V137 V138 V139 V140 V141 V142 V143 V144 V145 V146 V147 V148 V149 V150
## 1    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 2    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 3    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 4    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 5    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 6    0    0    0    0    0    0    0    0    0    0    0    0    0    0
##   V151 V152 V153 V154 V155 V156 V157 V158 V159 V160 V161 V162 V163 V164
## 1    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 2    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 3    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 4    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 5    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 6    0    0    0    0    0    0    0    0    0    0    0    0    0    0
##   V165 V166 V167 V168 V169 V170 V171 V172 V173 V174 V175 V176 V177 V178
## 1    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 2    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 3    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 4    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 5    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 6    0    0    0    0    0    0    0    0    0    0    0    0    0    0
##   V179 V180 V181 V182 V183 V184 V185 V186 V187 V188 V189 V190 V191 V192
## 1    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 2    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 3    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 4    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 5    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 6    0    0    0    0    0    0    0    0    0    0    0    0    0    0
##   V193 V194 V195 V196 V197 V198 V199 V200 V201 V202 V203 V204 V205 V206
## 1    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 2    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 3    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 4    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 5    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 6    0    0    0    0    0    0    0    0    0    0    0    0    0    0
##   V207 V208 V209 V210 V211 V212 V213 V214 V215 V216 V217 V218 V219 V220
## 1    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 2    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 3    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 4    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 5    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 6    0    0    0    0    0    0    0    0    0    0    0    0    0    0
##   V221 V222 V223 V224 V225 V226 V227 V228 V229 V230 V231 V232 V233 V234
## 1    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 2    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 3    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 4    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 5    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 6    0    0    0    0    0    0    0    0    0    0    0    0    0    0
##   V235 V236 V237 V238 V239 V240 V241 V242 V243 V244 V245 V246
## 1    0    0    0    0    0    0    0    0    0    0    0    0
## 2    0    0    0    0    0    0    0    0    0    0    0    0
## 3    0    0    0    0    0    0    0    0    0    0    0    0
## 4    0    0    0    0    0    0    0    0    0    0    0    0
## 5    0    0    0    0    0    0    0    0    0    0    0    0
## 6    0    0    0    0    0    0    0    0    0    0    0    0</code></pre>
<pre class="r"><code>dim(ckmnetwork)</code></pre>
<pre><code>## [1] 246 246</code></pre>
<pre class="r"><code>newvec = which(!is.na(ckmnodes$adoption_date))
clean_network = ckmnetwork[newvec, newvec]
head(clean_network)</code></pre>
<pre><code>##   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20
## 1  0  0  0  0  0  0  0  1  0   0   0   0   0   0   0   0   0   0   0   0
## 2  0  0  0  0  0  0  0  0  0   0   1   0   0   0   0   0   0   0   0   0
## 3  0  0  0  0  0  0  0  0  1   0   0   0   0   1   0   1   0   0   0   1
## 4  0  0  0  0  0  0  1  0  0   0   0   0   0   0   0   0   0   0   0   0
## 5  0  0  0  0  0  0  0  0  0   1   0   1   0   0   1   0   0   0   0   0
## 6  0  0  0  0  0  0  0  0  0   0   0   0   0   0   0   0   0   0   0   0
##   V21 V22 V23 V24 V25 V26 V27 V28 V29 V30 V31 V32 V33 V34 V35 V36 V37 V38
## 1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 3   0   0   0   0   0   0   0   0   1   0   1   0   1   0   1   0   1   0
## 4   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   1
## 5   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 6   0   0   0   0   0   0   0   0   1   0   1   0   0   0   0   0   0   0
##   V39 V58 V70 V72 V73 V74 V75 V76 V77 V78 V79 V80 V81 V82 V91 V92 V93 V94
## 1   0   1   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0
## 2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 3   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 4   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
## 5   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
## 6   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
##   V95 V96 V97 V98 V105 V108 V119 V121 V122 V123 V124 V125 V126 V127 V128
## 1   0   0   0   0    0    0    0    0    0    0    0    0    0    0    0
## 2   0   0   0   1    0    0    0    0    0    0    0    0    0    0    0
## 3   0   0   0   0    0    0    0    0    0    0    0    0    0    0    0
## 4   0   0   0   0    0    0    0    0    0    0    0    0    0    0    0
## 5   0   0   0   0    0    0    0    0    0    0    0    0    0    0    0
## 6   0   0   0   0    0    0    0    0    0    0    0    0    0    0    0
##   V129 V130 V131 V132 V133 V134 V135 V136 V137 V151 V152 V153 V154 V155
## 1    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 2    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 3    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 4    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 5    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 6    0    0    0    0    0    0    0    0    0    0    0    0    0    0
##   V156 V168 V169 V170 V171 V172 V173 V174 V175 V176 V177 V178 V179 V180
## 1    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 2    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 3    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 4    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 5    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 6    0    0    0    0    0    0    0    0    0    0    0    0    0    0
##   V181 V182 V195 V196 V197 V198 V199 V200 V212 V213 V214 V215 V216 V217
## 1    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 2    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 3    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 4    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 5    0    0    0    0    0    0    0    0    0    0    0    0    0    0
## 6    0    0    0    0    0    0    0    0    0    0    0    0    0    0
##   V218 V219 V220 V221 V222 V223 V224 V225 V226 V227 V229 V241
## 1    0    0    0    0    0    0    0    0    0    0    0    0
## 2    0    0    0    0    0    0    0    0    0    0    0    0
## 3    0    0    0    0    0    0    0    0    0    0    0    0
## 4    0    0    0    0    0    0    0    0    0    0    0    0
## 5    0    0    0    0    0    0    0    0    0    0    0    0
## 6    0    0    0    0    0    0    0    0    0    0    0    0</code></pre>
<pre class="r"><code>dim(clean_network)</code></pre>
<pre><code>## [1] 125 125</code></pre>
<ol start="6" style="list-style-type: decimal">
<li></li>
</ol>
<pre class="r"><code>numberofcontacts = apply(clean_network, 1, sum)
is.vector(numberofcontacts)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>numberofcontacts[41]</code></pre>
<pre><code>## 70 
##  3</code></pre>
<p>7a.</p>
<pre class="r"><code>count_peer_pressure = function(doctor){
  length(which(cleaned_nodes$adoption_date[clean_network[,doctor]==1]&lt;= cleaned_nodes$adoption_date[doctor]))
}

#this function finds all the contacts of doctor (clean_network[,doctor] ==1) and gives you their adoption date if that adoption date is less than or equal to the adoption date of doctor. It then gives the length of the resulting vector 
count_peer_pressure(37)  </code></pre>
<pre><code>## [1] 4</code></pre>
<pre class="r"><code>##INCORRECT ATTEMPTS AT CREATING PEER PRESSURE FUNCTION
  contacts = which(clean_network[,doctor] == 1)  ##gives you a list of the contacts of the original doctor
  return(length(contacts[cleaned_nodes$adoption_date &lt; month &amp; cleaned_nodes$adoption_date == month]))#now we want to take these contacts and return all of the contacts of doctor for whom cleaned_nodes$adoption_date &lt;= month
}

count_peer_pressure(37, 5)



for(i in 1:ncol(clean_network)){
  which(clean_network[,i] == 1)
}


## cleaned_nodes$adoption_date[clean_network[,1] == 1] gives you the month in which the contacts of doctor 1 began prescribing </code></pre>
<p>7b.</p>
<pre class="r"><code>prop_peer_pressure = function(doctor){length(which(cleaned_nodes$adoption_date[clean_network[,doctor] == 1] &lt;= cleaned_nodes$adoption_date[doctor])) / length(cleaned_nodes$adoption_date[clean_network[,doctor] ==1]) 
}
#takes the function from 7a and divides it by the total number of contactss
prop_peer_pressure(37)</code></pre>
<pre><code>## [1] 0.8</code></pre>
<pre class="r"><code>prop_peer_pressure(102)</code></pre>
<pre><code>## [1] NaN</code></pre>
<p>8a.</p>
<pre class="r"><code>samemonthprop = function(month){
mean(apply(as.array(which(cleaned_nodes$adoption_date == month)), 1, prop_peer_pressure), na.rm = TRUE) 
}
##of all doctors who started prescribing in a particular month, what proportion of them had contacts who were already prescribing by that month 
samemonthprop(8)</code></pre>
<pre><code>## [1] 0.7477891</code></pre>
<pre class="r"><code>latermonthsprop = function(month){
  mean(apply(as.array(which(cleaned_nodes$adoption_date &gt; month |  cleaned_nodes$adoption_date == &quot;Inf&quot;)), 1, prop_peer_pressure), na.rm = TRUE)
}
latermonthsprop(8)</code></pre>
<pre><code>## [1] 0.8752137</code></pre>
<pre class="r"><code>#for all doctors who started prescribing after the month or never, what proportion of their contacts had already started prescribing 

averaging.peer.pressure = function(month){
  cbind(samemonthprop(month), latermonthsprop(month))
}

##puts two vectors together </code></pre>
<pre class="r"><code>##INCORRECT ATTEMPTS AT CREATING FUNCTION 
my_function = function(month, not.yet = FALSE){
  if(not.yet == FALSE) {return (mean(apply(as.array(which(cleaned_nodes$adoption_date == month)), 1, prop_peer_pressure), na.rm = TRUE))}
  else 
    {return (mean(apply(as.array(which(cleaned_nodes$adoption_date &gt; month |  cleaned_nodes$adoption_date == &quot;Inf&quot;)), 1, prop_peer_pressure), na.rm = TRUE))
  }
}
 ##if a doctor has begun prescribing by that month, then this function takes the mean proportion of contacts of that doctor who were prescribing on or before that month. If a doctor has not begun prescribing by that month, this function returns the average proportion of prescribers among that contact 

my_function(8)</code></pre>
<pre class="r"><code>test = apply(as.array(which(cleaned_nodes$adoption_date ==8)), 1, prop_peer_pressure) ##all doctors who started prescribing in month 8, applies prop peer pressure function to all those doctors) 

mean(test) #finds the average proportion of prescribers among the contacts of the doctors who began prescribing in month 8

test2 = apply(as.array(which(cleaned_nodes$adoption_date &gt; 8 | cleaned_nodes$adoption_date == &quot;Inf&quot;)), 1, prop_peer_pressure) ##does same thing is other apply function but for doctors who prescribed after month 8 or never 

mean(test2, na.rm = TRUE)




doctors.in.month = which(cleaned_nodes$adoption_date == 5)

?apply

adopters = function(month, not.yet = FALSE){
  if (not.yet == FALSE) {return (as.vector(cleaned_nodes$adoption_date ==  month))}
  else {return (as.vector(cleaned_nodes$adoption_date &gt; month | cleaned_nodes$adoption_date == &quot;Inf&quot;))}
}


as.vector(cleaned_nodes$adoption_date &gt; 8 | cleaned_nodes$adoption_date == &quot;Inf&quot;) #gives a vector of all of the doctors who started prescribing after month 8 or who never started prescribing </code></pre>
<p>8b. Compute the average proportions from (8a) for each month in the study. Use an apply function rather than a loop if you can. Plot the two average proportions from (8a) over time, and in a second plot show their difference. Do the doctors who adopt in a given month consistently have more contacts who are already prescribing than the non-adopters?</p>
<pre class="r"><code>all.month.prop = apply(as.array(1:17), 1, averaging.peer.pressure) ##apply the averaging.peer.pressure function for every month from 1 to 17

samemonthprop = function(month){
mean(apply(as.array(which(cleaned_nodes$adoption_date == month)), 1, prop_peer_pressure), na.rm = TRUE) 
}

latermonthsprop = function(month){
  mean(apply(as.array(which(cleaned_nodes$adoption_date &gt; month |  cleaned_nodes$adoption_date == &quot;Inf&quot;)), 1, prop_peer_pressure), na.rm = TRUE)
}

all.month.same = apply(as.array(1:17), 1, samemonthprop)
all.month.same</code></pre>
<pre><code>##  [1] 0.2318182 0.2370851 0.2623106 0.4525000 0.2698052 0.7060606 0.7743590
##  [8] 0.7477891 0.7666667 1.0000000 0.9166667 0.5000000 0.6666667 0.8750000
## [15] 1.0000000 0.5000000 0.6666667</code></pre>
<pre class="r"><code>all.month.later = apply(as.array(1:17), 1, latermonthsprop)
all.month.later</code></pre>
<pre><code>##  [1] 0.6382065 0.6746720 0.7109236 0.7428277 0.8171599 0.8378733 0.8558230
##  [8] 0.8752137 0.8842593 0.8809524 0.8763441 0.9022989 0.9294872 0.9393939
## [15] 0.9259259 0.9791667 1.0000000</code></pre>
<pre class="r"><code>y1 = all.month.same
y2 = all.month.later

##one way to plot 
plot(x = c(1:17), y1, ylim=range(c(y1,y2)), col = &quot;red&quot;, xlab = &quot;month&quot;, ylab = &quot;proportion of contacts prescribing&quot;)
par(new = TRUE)
plot(x = c(1:17), y2, ylim = range(c(y1,y2)), col = &quot;green&quot;, xlab = &quot;month&quot;, ylab = &quot;proportion of contacts prescribing&quot;)



##alternate way to plot
?data.frame

d = data.frame(x = c(1:17), y1=all.month.same, y2=all.month.later)
library(ggplot2)</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 3.3.2</code></pre>
<p><img src="/post/In-Class-Project-2_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<pre class="r"><code>ggplot(d, aes(x=x, y=value, color=variable)) + 
geom_point(aes(y=y1, col=&quot;y1&quot;, pch=2 ))+
geom_point(aes(y=y2, col=&quot;y2&quot;, pch=1)) + scale_shape_identity() + labs(list(x=&quot;month&quot;, y=&quot;proportion of contacts who have already started prescribing&quot;))</code></pre>
<p><img src="/post/In-Class-Project-2_files/figure-html/unnamed-chunk-13-2.png" width="672" /></p>
<pre class="r"><code>diff = all.month.same - all.month.later
diff</code></pre>
<pre><code>##  [1] -0.40638829 -0.43758691 -0.44861299 -0.29032775 -0.54735467
##  [6] -0.13181268 -0.08146401 -0.12742456 -0.11759259  0.11904762
## [11]  0.04032258 -0.40229885 -0.26282051 -0.06439394  0.07407407
## [16] -0.47916667 -0.33333333</code></pre>
<pre class="r"><code>plot(diff)</code></pre>
<p><img src="/post/In-Class-Project-2_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>

    </div>
  </div>

</article>

<div class="container">
  <nav>
  <ul class="pager">
    

    
    <li class="next"><a href="https://www.sullivanstatistics.com/post/2015-01-01-lorem-ipsum/">Lorem Ipsum <span
      aria-hidden="true">&rarr;</span></a></li>
    
  </ul>
</nav>

</div>

<div class="article-container">
  
<section id="comments">
  <div id="disqus_thread">
    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'mollymccarthy';
    var disqus_identifier = 'https:\/\/www.sullivanstatistics.com\/post\/In-Class-Project-2\/';
    var disqus_title = 'In Class Assignment Feb 28';
    var disqus_url = 'https:\/\/www.sullivanstatistics.com\/post\/In-Class-Project-2\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</section>


</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2016 Molly McCarthy &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.4/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
    <script src="/js/jquery-1.12.3.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/isotope.pkgd.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.1/imagesloaded.pkgd.min.js"></script>
    <script src="/js/hugo-academic.js"></script>
    

    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    <script async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script>
    

  </body>
</html>

